<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Handwritten Assignment Studio</title>
    <link rel="stylesheet" href="/static/style.css">
    <link rel="stylesheet" href="/static/preview.css">
</head>
<body>
    <header>
        <div class="header-content">
            <h1>âœï¸ Handwritten Assignment Studio</h1>
            <p class="tagline">Transform your text into realistic handwritten PDFs instantly</p>
            <label class="dark-mode-toggle">
                <input type="checkbox" id="darkMode" aria-label="Dark mode">
                <span class="toggle-switch"></span>
                Dark
            </label>
        </div>
    </header>

    <main class="container">
        <div class="panel controls-panel">
            <!-- Text area -->
            <section class="section">
                <h2 class="section-title">Your text</h2>
                <div class="text-input-wrapper">
                    <textarea id="textInput" placeholder="Paste or type your assignment here. Use headings like Name:, Q1., Ans: for best results."></textarea>
                    <div class="text-stats">
                        <span id="wordCount">0 words</span>
                        <span id="charCount">0 chars</span>
                    </div>
                </div>
            </section>

            <!-- Quick actions -->
            <section class="section">
                <h2 class="section-title">Quick actions</h2>
                <div class="button-row button-row-wrap">
                    <button type="button" id="pasteBtn" class="btn btn-action" title="Paste from clipboard (Ctrl+V)">ğŸ“‹ Paste</button>
                    <button type="button" id="copyTextBtn" class="btn btn-action" title="Copy text to clipboard (Ctrl+C)">ğŸ“„ Copy</button>
                    <button type="button" id="copySampleBtn" class="btn btn-action" title="Load example assignment">ğŸ“ Sample</button>
                    <button type="button" id="autoStructureBtn" class="btn btn-action" title="Fix formatting automatically">âœ¨ Structure</button>
                    <button type="button" id="importFileBtn" class="btn btn-action" title="Import from file">ğŸ“ Import</button>
                    <button type="button" id="undoBtn" class="btn btn-action" title="Undo (Ctrl+Z)" disabled>â†¶ Undo</button>
                    <button type="button" id="redoBtn" class="btn btn-action" title="Redo (Ctrl+Y)" disabled>â†· Redo</button>
                    <button type="button" id="clearTextBtn" class="btn btn-action btn-action-danger" title="Clear all text">ğŸ—‘ï¸ Clear</button>
                </div>
                <input type="file" id="importFileInput" accept=".txt,.md" style="display: none;">
            </section>

            <!-- Templates -->
            <section class="section">
                <h2 class="section-title">Start from template</h2>
                <div class="button-row button-row-wrap">
                    <button type="button" id="templateAssignment" class="btn btn-template">ğŸ“š Assignment</button>
                    <button type="button" id="templateLab" class="btn btn-template">ğŸ”¬ Lab record</button>
                    <button type="button" id="templateSeminar" class="btn btn-template">ğŸ“ Seminar</button>
                    <button type="button" id="templateInternal" class="btn btn-template">ğŸ“‹ Internal</button>
                </div>
            </section>

            <!-- Presets -->
            <section class="section">
                <h2 class="section-title">Style preset</h2>
                <div class="button-row button-row-wrap">
                    <button type="button" id="presetNeat" class="btn btn-preset">âœ¨ Neat</button>
                    <button type="button" id="presetNatural" class="btn btn-preset btn-preset-active">âœï¸ Natural</button>
                    <button type="button" id="presetFast" class="btn btn-preset">âš¡ Fast</button>
                    <button type="button" id="resetSettingsBtn" class="btn btn-action" title="Reset all settings">ğŸ”„ Reset</button>
                </div>
            </section>

            <!-- Main controls (font, size, page) -->
            <section class="section">
                <h2 class="section-title">Look & feel</h2>
                <div class="controls-grid">
                    <div class="control-group">
                        <label for="fontSelect">Font</label>
                        <select id="fontSelect">
                            {% for font in fonts %}
                            <option value="{{ font }}" {% if font == 'ComicNeue' %}selected{% endif %}>{{ font }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="control-group">
                        <label for="fontSize">Size <span id="fontSizeVal">18</span></label>
                        <input type="range" id="fontSize" min="10" max="36" value="18">
                    </div>
                    <div class="control-group">
                        <label for="lineSpacing">Line spacing <span id="lineSpacingVal">28</span></label>
                        <input type="range" id="lineSpacing" min="16" max="50" value="28">
                    </div>
                    <div class="control-group">
                        <label for="inkColor">Ink color</label>
                        <div class="color-picker-wrap">
                            <input type="color" id="inkColor" value="#0A1F5C">
                            <span id="inkColorVal">#0A1F5C</span>
                        </div>
                    </div>
                    <div class="control-group">
                        <label for="marginLeft">Margin <span id="marginLeftVal">60</span></label>
                        <input type="range" id="marginLeft" min="20" max="120" value="60">
                    </div>
                    <div class="control-group">
                        <label for="pageStyle">Paper</label>
                        <select id="pageStyle">
                            <option value="blank">Plain</option>
                            <option value="cream">Cream</option>
                            <option value="aged">Aged</option>
                            <option value="notebook" selected>Notebook</option>
                            <option value="legal_yellow">Legal pad</option>
                            <option value="grid">Grid</option>
                            <option value="grain">Grain</option>
                            <option value="fold_crease">Fold crease</option>
                            <option value="corner_shadow">Corner shadow</option>
                        </select>
                    </div>
                    <div class="control-group">
                        <label for="pageSize">Page size</label>
                        <select id="pageSize">
                            <option value="A4" selected>A4</option>
                            <option value="A3">A3</option>
                            <option value="A5">A5</option>
                            <option value="Letter">Letter</option>
                        </select>
                    </div>
                </div>
            </section>

            <!-- Generate -->
            <section class="section section-actions">
                <button type="button" id="generateBtn" class="btn btn-primary btn-large">ğŸš€ Generate PDF</button>
                <div id="afterGenerate" class="after-generate after-generate-left" hidden>
                    <p class="after-generate-label">Your PDF is ready</p>
                    <div class="button-row button-row-wrap">
                        <button type="button" id="downloadBtn" class="btn btn-success">ğŸ“¥ Download PDF</button>
                        <button type="button" id="downloadJpg" class="btn btn-outline">ğŸ–¼ï¸ JPG</button>
                        <button type="button" id="downloadPng" class="btn btn-outline">ğŸ–¼ï¸ PNG</button>
                        <button type="button" id="printBtn" class="btn btn-outline" title="Print PDF">ğŸ–¨ï¸ Print</button>
                        <button type="button" id="newPdfBtn" class="btn btn-outline">ğŸ†• New PDF</button>
                    </div>
                    <label class="toggle-label toggle-inline">
                        <input type="checkbox" id="scanEffect">
                        <span class="toggle-switch"></span>
                        Scan effect (for JPG/PNG)
                    </label>
                </div>
            </section>

            <!-- Advanced (collapsible) -->
            <details class="section section-advanced" id="advancedDetails">
                <summary class="section-title" role="button" tabindex="0">Advanced options</summary>
                <div class="advanced-inner">
                    <h3 class="sub-label">Realism</h3>
                    <div class="toggles-row">
                        <label class="toggle-label"><input type="checkbox" id="spacingVariation" checked><span class="toggle-switch"></span>Spacing</label>
                        <label class="toggle-label"><input type="checkbox" id="jitter" checked><span class="toggle-switch"></span>Jitter</label>
                        <label class="toggle-label"><input type="checkbox" id="inkVariation" checked><span class="toggle-switch"></span>Ink variation</label>
                        <label class="toggle-label"><input type="checkbox" id="wordSizeVariation" checked><span class="toggle-switch"></span>Word size</label>
                        <label class="toggle-label"><input type="checkbox" id="baselineShift" checked><span class="toggle-switch"></span>Baseline</label>
                        <label class="toggle-label"><input type="checkbox" id="inkFlow" checked><span class="toggle-switch"></span>Ink flow</label>
                        <label class="toggle-label"><input type="checkbox" id="gelPen"><span class="toggle-switch"></span>Gel pen</label>
                    </div>
                    <div class="control-group compact">
                        <label for="jitterStrength">Jitter strength <span id="jitterStrengthVal">1.0</span></label>
                        <input type="range" id="jitterStrength" min="0.2" max="2" step="0.1" value="1">
                    </div>
                    <h3 class="sub-label">Layout</h3>
                    <div class="toggles-row">
                        <label class="toggle-label"><input type="checkbox" id="marginRule" checked><span class="toggle-switch"></span>Red margin</label>
                        <label class="toggle-label"><input type="checkbox" id="doubleMargin"><span class="toggle-switch"></span>Double margin</label>
                        <label class="toggle-label"><input type="checkbox" id="newQuestionOnNewPage"><span class="toggle-switch"></span>New Q on new page</label>
                        <label class="toggle-label"><input type="checkbox" id="boldQuestion"><span class="toggle-switch"></span>Bold questions</label>
                        <label class="toggle-label"><input type="checkbox" id="underlineHeadings"><span class="toggle-switch"></span>Underline headings</label>
                    </div>
                    <h3 class="sub-label">Signature</h3>
                    <div class="signature-row">
                        <input type="file" id="signatureFile" accept="image/*">
                        <button type="button" id="clearSignatureBtn" class="btn btn-outline btn-small">Clear signature</button>
                        <canvas id="signaturePreview" width="120" height="50" class="signature-preview" hidden></canvas>
                    </div>
                    <h3 class="sub-label">Page Numbers & Headers</h3>
                    <div class="toggles-row">
                        <label class="toggle-label"><input type="checkbox" id="pageNumbers"><span class="toggle-switch"></span>Page numbers</label>
                    </div>
                    <div class="control-group compact">
                        <label for="headerText">Header text</label>
                        <input type="text" id="headerText" placeholder="e.g., Assignment Title" maxlength="200">
                    </div>
                    <div class="control-group compact">
                        <label for="footerText">Footer text</label>
                        <input type="text" id="footerText" placeholder="e.g., Student Name" maxlength="200">
                    </div>
                    <div class="control-group compact">
                        <label for="watermarkText">Watermark</label>
                        <input type="text" id="watermarkText" placeholder="e.g., DRAFT" maxlength="100">
                    </div>
                </div>
            </details>
        </div>

        <div class="panel preview-panel" id="previewPanel">
            <div class="preview-header">
                <h2 class="section-title">Preview</h2>
                <button type="button" id="fullscreenPreviewBtn" class="btn btn-icon" title="Full screen preview">ğŸ”</button>
            </div>
            <div id="previewWrapper" class="preview-wrapper">
                <div id="previewContainer" class="preview-container">
                    <div id="previewPage" class="preview-page blank a4-preview">
                        <div class="preview-placeholder">
                            <p>Type or paste text to see preview</p>
                        </div>
                    </div>
                </div>
                <div id="pdfViewer" class="pdf-viewer" hidden>
                    <iframe id="pdfFrame" src="" title="Generated PDF"></iframe>
                </div>
            </div>
            <div id="statusBar" class="status-bar">âœ¨ Ready to generate</div>
        </div>
    </main>

    <footer style="display: block !important; visibility: visible !important;">
        <p>Made with â¤ï¸ â€¢ Handwritten Assignment Studio â€¢ Created by Suhana Kousar</p>
    </footer>

    <div id="loadingOverlay" class="loading-overlay" hidden>
        <div class="spinner"></div>
        <p>Generating PDFâ€¦</p>
        <button type="button" id="closeLoadingOverlay" class="btn btn-outline loading-overlay-close">Cancel</button>
    </div>

    <div id="fullscreenModal" class="fullscreen-modal" hidden>
        <button type="button" id="closeFullscreen" class="btn btn-icon fullscreen-close" aria-label="Close">Ã—</button>
        <div id="fullscreenContent" class="fullscreen-content"></div>
    </div>

    <script src="/static/script.js"></script>
</body>
</html>
